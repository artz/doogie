{"version":3,"sources":["doogie.min.js"],"names":["angular","module","$","defaults","days","host","legend","fn","doogieboard","options","isTimeago","jQuery","timeago","extend","isNaN","eventPromise","get","__populate","__sort","servicePromise","statusPromise","this","each","index","elem","$elem","addClass","$table","$thead","$tbody","append","i","l","text","when","done","events","services","statuses","hash","length","date","Date","service","_id","$tr","name","j","k","$td","data","getMonth","getDate","setDate","event","createdAt","_service","_status","level","eventCount","find","html","toISOString","getHours","getMinutes","message","$legend","status","description","wrap","prepend","$activeDay","$activeInfo","on","removeClass","remove","undefined","parent","getFullYear","after","factory","define","amd","refresh","contains","document","documentElement","prepareData","$s","$t","settings","datetime","cutoff","Math","abs","distance","inWords","element","trim","localeTitle","attr","toLocaleString","isTime","getTime","timestamp","parse","refreshMillis","allowPast","allowFuture","strings","prefixAgo","prefixFromNow","suffixAgo","suffixFromNow","inPast","seconds","minute","minutes","hour","hours","day","month","months","year","years","wordSeparator","numbers","distanceMillis","substitute","stringOrFunction","number","string","isFunction","value","$l","replace","prefix","suffix","words","round","separator","join","iso8601","s","tagName","toLowerCase","functions","init","refresh_el","proxy","_timeagoInterval","setInterval","update","time","parsedTime","apply","updateFromDOM","dispose","window","clearInterval","action","Error","call","createElement","directive","link","scope","checksController","Service","Check","self","checks","query","check","create","$save","then","$delete","templateUrl","controller","controllerAs","eventsController","Event","Status","$event","preventDefault","servicesController","statusesController","Resource","$resource","url","paramDefaults","actions","method","resource","prototype","callback","$update","$create","run","$templateCache","put"],"mappings":"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","file":"doogie.min.js","sourcesContent":["angular.module(\"doogie\",[\"doogie.templates\",\"ngResource\"]),function(e){\"use strict\";var t={days:5,host:\"http://localhost:3001/api/\",legend:!0};e.fn.doogieboard=function(n){var s=!!jQuery.timeago;n=n||{},n=e.extend({},t,n),(isNaN(n.days)||n.days<1)&&(n.days=t.days);var o=e.get(n.host+\"events\",{__populate:\"_status _service\",__sort:\"-createdAt\"}),a=e.get(n.host+\"services\",{__sort:\"name\"}),r=e.get(n.host+\"statuses\",{__sort:\"level\"});this.each(function(t,i){var l=n.days,c=e(i).addClass(\"doogieboard\"),d=e('<table class=\"table\"></table>'),u=e(\"<thead><tr></tr></thead>\"),m=e(\"<tbody></tbody>\");u.append(\"<th>Service</th>\");for(var f=0,p=l;p>f;f+=1){var v;v=0===f?\"Today\":1===f?\"Yesterday\":f+\" days ago\",u.append(\"<th>\"+v+\"</th>\")}e.when(o,a,r).done(function(t,o,a){var r={};o=o[0];for(var i=0,f=o.length;f>i;i+=1){var p=new Date,v=o[i];r[v._id]={};var g=e(\"<tr></tr>\");g.append('<td class=\"service-name\">'+v.name+\"</td>\");for(var h=0,b=l;b>h;h+=1){var y=e('<td class=\"daysago-'+h+'\"><span class=\"doogieboard-badge\"><b class=\"event-count\">0</b></span></td>');y.data(\"eventCount\",0),y.data(\"date\",p),r[v._id][p.getMonth()+\"-\"+p.getDate()]=y,g.append(y),p.setDate(p.getDate()-1)}m.append(g)}t=t[0];for(var _,i=0,f=t.length;f>i;i+=1){_=t[i];var w=new Date(_.createdAt),y=r[_._service._id][w.getMonth()+\"-\"+w.getDate()];y.data(\"hasEvents\")||(y.data(\"hasEvents\",!0),y.addClass(\"doogieboard-events\"),y.addClass(\"level-\"+_._status.level));var k=y.data(\"eventCount\")+1;y.data(\"eventCount\",k),y.find(\".event-count\").html(k),y.append('<div class=\"event\"><b class=\"status\">'+_._status.name+'</b> <time class=\"timeago\" datetime=\"'+w.toISOString()+'\">'+w.getMonth()+\"/\"+w.getDate()+\" \"+w.getHours()+\":\"+w.getMinutes()+\"</time><p>\"+_.message+\"</p></div>\")}if(d.append(u),d.append(m),c.append(d),n.legend){a=a[0];for(var S=e('<ul class=\"status-list\"></ul>'),i=0,f=a.length;f>i;i+=1){var x=a[i];S.append('<li class=\"status-item level-'+x.level+'\"><b>'+x.name+\"</b> <i>\"+x.description+\"</li>\")}S.wrap('<div class=\"legend\"></div>'),S.prepend(\"<h2>Status Legend</h2>\"),c.append(S)}s&&c.find(\".timeago\").timeago();var D,T;c.on(\"click\",\"td.doogieboard-events\",function(){var t=e(this);if(D&&(D.removeClass(\"events-open\"),T.remove(),D[0]===t[0]))return void(D=T=void 0);t.addClass(\"events-open\"),D=t;var n=t.parent(),s=t.data(\"date\");s=s.getMonth()+1+\"/\"+s.getDate()+\"/\"+s.getFullYear(),T=e('<tr class=\"doogieboard-info\"><td><span class=\"date\">'+s+'</span></td><td colspan=\"'+l+'\">'+t.html()+\"</td></tr>\"),n.after(T)})})})}}(jQuery),function(e){\"function\"==typeof define&&define.amd?define([\"jquery\"],e):e(jQuery)}(function(e){function t(){if(!e.contains(document.documentElement,this))return e(this).timeago(\"dispose\"),this;var t=n(this),r=a.settings;return isNaN(t.datetime)||(0==r.cutoff||Math.abs(o(t.datetime))<r.cutoff)&&e(this).text(s(t.datetime)),this}function n(t){if(t=e(t),!t.data(\"timeago\")){t.data(\"timeago\",{datetime:a.datetime(t)});var n=e.trim(t.text());a.settings.localeTitle?t.attr(\"title\",t.data(\"timeago\").datetime.toLocaleString()):!(n.length>0)||a.isTime(t)&&t.attr(\"title\")||t.attr(\"title\",n)}return t.data(\"timeago\")}function s(e){return a.inWords(o(e))}function o(e){return(new Date).getTime()-e.getTime()}e.timeago=function(t){return s(t instanceof Date?t:\"string\"==typeof t?e.timeago.parse(t):\"number\"==typeof t?new Date(t):e.timeago.datetime(t))};var a=e.timeago;e.extend(e.timeago,{settings:{refreshMillis:6e4,allowPast:!0,allowFuture:!1,localeTitle:!1,cutoff:0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:\"ago\",suffixFromNow:\"from now\",inPast:\"any moment now\",seconds:\"less than a minute\",minute:\"about a minute\",minutes:\"%d minutes\",hour:\"about an hour\",hours:\"about %d hours\",day:\"a day\",days:\"%d days\",month:\"about a month\",months:\"%d months\",year:\"about a year\",years:\"%d years\",wordSeparator:\" \",numbers:[]}},inWords:function(t){function n(n,o){var a=e.isFunction(n)?n(o,t):n,r=s.numbers&&s.numbers[o]||o;return a.replace(/%d/i,r)}if(!this.settings.allowPast&&!this.settings.allowFuture)throw\"timeago allowPast and allowFuture settings can not both be set to false.\";var s=this.settings.strings,o=s.prefixAgo,a=s.suffixAgo;if(this.settings.allowFuture&&0>t&&(o=s.prefixFromNow,a=s.suffixFromNow),!this.settings.allowPast&&t>=0)return this.settings.strings.inPast;var r=Math.abs(t)/1e3,i=r/60,l=i/60,c=l/24,d=c/365,u=45>r&&n(s.seconds,Math.round(r))||90>r&&n(s.minute,1)||45>i&&n(s.minutes,Math.round(i))||90>i&&n(s.hour,1)||24>l&&n(s.hours,Math.round(l))||42>l&&n(s.day,1)||30>c&&n(s.days,Math.round(c))||45>c&&n(s.month,1)||365>c&&n(s.months,Math.round(c/30))||1.5>d&&n(s.year,1)||n(s.years,Math.round(d)),m=s.wordSeparator||\"\";return void 0===s.wordSeparator&&(m=\" \"),e.trim([o,u,a].join(m))},parse:function(t){var n=e.trim(t);return n=n.replace(/\\.\\d+/,\"\"),n=n.replace(/-/,\"/\").replace(/-/,\"/\"),n=n.replace(/T/,\" \").replace(/Z/,\" UTC\"),n=n.replace(/([\\+\\-]\\d\\d)\\:?(\\d\\d)/,\" $1$2\"),n=n.replace(/([\\+\\-]\\d\\d)$/,\" $100\"),new Date(n)},datetime:function(t){var n=e(t).attr(a.isTime(t)?\"datetime\":\"title\");return a.parse(n)},isTime:function(t){return\"time\"===e(t).get(0).tagName.toLowerCase()}});var r={init:function(){var n=e.proxy(t,this);n();var s=a.settings;s.refreshMillis>0&&(this._timeagoInterval=setInterval(n,s.refreshMillis))},update:function(n){var s=a.parse(n);e(this).data(\"timeago\",{datetime:s}),a.settings.localeTitle&&e(this).attr(\"title\",s.toLocaleString()),t.apply(this)},updateFromDOM:function(){e(this).data(\"timeago\",{datetime:a.parse(e(this).attr(a.isTime(this)?\"datetime\":\"title\"))}),t.apply(this)},dispose:function(){this._timeagoInterval&&(window.clearInterval(this._timeagoInterval),this._timeagoInterval=null)}};e.fn.timeago=function(e,t){var n=e?r[e]:r.init;if(!n)throw new Error(\"Unknown function name '\"+e+\"' for timeago\");return this.each(function(){n.call(this,t)}),this},document.createElement(\"abbr\"),document.createElement(\"time\")}),angular.module(\"doogie\").directive(\"doogieBoard\",[\"$timeout\",function(){function e(e,t){t.doogieboard()}var t={link:e};return t}]),angular.module(\"doogie\").directive(\"doogieChecks\",function(){function e(e,t){function n(){s.checks=t.query()}var s=this;n(),s.services=e.query({__sort:\"name\"}),s.check={},s.create=function(e){new t(e).$save().then(function(){n(),s.check={}})},s.update=function(e){e.$save().then(n)},s[\"delete\"]=function(e){e.$delete().then(function(){n()})}}var t={scope:{},templateUrl:\"templates/doogieChecks.html\",controller:e,controllerAs:\"self\"};return t}),angular.module(\"doogie\").directive(\"doogieEvents\",function(){function e(e,t,n){function s(){o.events=e.query()}var o=this;s(),o.services=n.query({__sort:\"name\"}),o.statuses=t.query({__sort:\"level\"}),o.event={},o.create=function(t){new e(t).$save().then(function(){s(),o.event={}})},o.update=function(e,t){e.$save().then(s),t.preventDefault()},o[\"delete\"]=function(e){e.$delete().then(function(){s()})}}var t={scope:{},templateUrl:\"templates/doogieEvents.html\",controller:e,controllerAs:\"self\"};return t}),angular.module(\"doogie\").directive(\"doogieServices\",function(){function e(e){function t(){n.services=e.query()}var n=this;t(),n.service={},n.create=function(s){new e(s).$save().then(function(){t(),n.service={}})},n.update=function(e){e.$save().then(t)},n[\"delete\"]=function(e){e.$delete().then(function(){t()})}}var t={scope:{},templateUrl:\"templates/doogieServices.html\",controller:e,controllerAs:\"self\"};return t}),angular.module(\"doogie\").directive(\"doogieStatuses\",function(){function e(e){function t(){n.statuses=e.query()}var n=this;t(),n.status={},n.create=function(s){new e(s).$save().then(function(){t(),n.status={}})},n.update=function(e){e.$save().then(t)},n[\"delete\"]=function(e){e.$delete().then(function(){t()})}}var t={scope:{},templateUrl:\"templates/doogieStatuses.html\",controller:e,controllerAs:\"self\"};return t}),angular.module(\"doogie\").factory(\"Check\",[\"Resource\",function(e){return e(\"checks/:_id\",{_id:\"@_id\"})}]),angular.module(\"doogie\").factory(\"Event\",[\"Resource\",function(e){return e(\"events/:_id\",{_id:\"@_id\"})}]),angular.module(\"doogie\").factory(\"Resource\",[\"$resource\",function(e){return function(t,n,s){t=\"/api/\"+t;var o={update:{method:\"put\"},create:{method:\"post\"}};s=angular.extend(o,s);var a=e(t,n,s);return a.prototype.$save=function(e){return this._id?this.$update(e):this.$create(e)},a}}]),angular.module(\"doogie\").factory(\"Service\",[\"Resource\",function(e){return e(\"services/:_id\",{_id:\"@_id\"})}]),angular.module(\"doogie\").factory(\"Status\",[\"Resource\",function(e){return e(\"statuses/:_id\",{_id:\"@_id\"})}]),angular.module(\"doogie.templates\",[]).run([\"$templateCache\",function(e){e.put(\"templates/doogieChecks.html\",'<h2>Checks</h2>\\n  method: { type: String, required: true, default: \\'GET\\' },\\n  headers: {},\\n  params: {},\\n  body: String,\\n  successCode: String,\\n  errorCode: String,\\n  successResponseTime: Number,\\n  errorResponseTime: Number,\\n<form class=\"form-inline\" ng-repeat=\"check in self.checks | orderBy: \\'url\\'\">\\n  <div class=\"form-group\">\\n    <select class=\"form-control\" ng-model=\"check._service\" ng-options=\"service._id as service.name for service in self.services\"></select>\\n  </div>\\n\t<div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Name\" ng-model=\"check.name\">\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"http://www.yourcheck.com\" ng-model=\"check.url\">\\n  </div>\\n  <select class=\"form-control\" ng-model=\"check.method\">\\n    <option value=\"GET\">GET</option>\\n    <option value=\"POST\">POST</option>\\n    <option value=\"PUT\">PUT</option>\\n    <option value=\"DELETE\">DELETE</option>\\n  </select>\\n  <div class=\"form-group\">\\n\t  <button type=\"submit\" class=\"btn btn-default\" ng-click=\"self.update(check)\">Save</button>\\n\t  <button type=\"submit\" class=\"btn btn-danger\" ng-click=\"self.delete(check)\">Delete</button>\\n  </div>\\n</form>\\n<form class=\"form-inline\">\\n  <div class=\"form-group\">\\n    <select class=\"form-control\" ng-model=\"self.check._service\" ng-options=\"service._id as service.name for service in self.services\"></select>\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Name\" ng-model=\"self.check.name\">\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"http://www.yourcheck.com\" ng-model=\"self.check.url\">\\n  </div>\\n  <div class=\"form-group\">\\n  \t<button type=\"submit\" class=\"btn btn-primary\" ng-click=\"self.create(self.check)\">Add</button>\\n  </div>\\n</form>\\n'),e.put(\"templates/doogieEvents.html\",'<h2>Events</h2>\\n<form class=\"form-inline\">\\n  <div class=\"form-group\">\\n    <select class=\"form-control\" ng-model=\"self.event._service\" ng-options=\"service._id as service.name for service in self.services\"></select>\\n  </div>\\n  <div class=\"form-group\">\\n    <select class=\"form-control\" ng-model=\"self.event._status\" ng-options=\"status._id as status.name for status in self.statuses\"></select>\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Message\" ng-model=\"self.event.message\">\\n  </div>\\n  <div class=\"form-group\">\\n  \t<button type=\"submit\" class=\"btn btn-primary\" ng-click=\"self.create(self.event)\">Send</button>\\n  </div>\\n</form>\\n<form class=\"form-inline\" ng-repeat=\"event in self.events | orderBy : \\'createdAt\\' : true \">\\n\t<div class=\"form-group\">\\n    <select class=\"form-control\" ng-model=\"event._service\" ng-options=\"service._id as service.name for service in self.services\"></select>\\n  </div>\\n  <div class=\"form-group\">\\n    <select class=\"form-control\" ng-model=\"event._status\" ng-options=\"status._id as status.name for status in self.statuses\"></select>\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Message\" ng-model=\"event.message\">\\n  </div>\\n  <div class=\"form-group\">\\n\t  <button type=\"submit\" class=\"btn btn-default\" ng-click=\"self.update(event, $event)\">Save</button>\\n\t  <button type=\"submit\" class=\"btn btn-danger\" ng-click=\"self.delete(event)\">Delete</button>\\n  </div>\\n</form>\\n'),e.put(\"templates/doogieServices.html\",'<h2>Services</h2>\\n<form class=\"form-inline\" ng-repeat=\"service in self.services | orderBy: \\'name\\'\">\\n\t<div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Name\" ng-model=\"service.name\">\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Description\" ng-model=\"service.description\">\\n  </div>\\n  <div class=\"form-group\">\\n\t  <button type=\"submit\" class=\"btn btn-default\" ng-click=\"self.update(service)\">Save</button>\\n\t  <button type=\"submit\" class=\"btn btn-danger\" ng-click=\"self.delete(service)\">Delete</button>\\n  </div>\\n</form>\\n<form class=\"form-inline\">\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Name\" ng-model=\"self.service.name\">\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Description\" ng-model=\"self.service.description\">\\n  </div>\\n  <div class=\"form-group\">\\n  \t<button type=\"submit\" class=\"btn btn-primary\" ng-click=\"self.create(self.service)\">Add</button>\\n  </div>\\n</form>\\n'),e.put(\"templates/doogieStatuses.html\",'<h2>Statuses</h2>\\n<form class=\"form-inline\" ng-repeat=\"status in self.statuses | orderBy : \\'level\\'\">\\n\t<div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Name\" ng-model=\"status.name\">\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Description\" ng-model=\"status.description\">\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"number\" class=\"form-control\" placeholder=\"0\" ng-model=\"status.level\">\\n  </div>\\n  <div class=\"form-group\">\\n\t  <button type=\"submit\" class=\"btn btn-default\" ng-click=\"self.update(status)\">Save</button>\\n\t  <button type=\"submit\" class=\"btn btn-danger\" ng-click=\"self.delete(status)\">Delete</button>\\n  </div>\\n</form>\\n<form class=\"form-inline\">\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Name\" ng-model=\"self.status.name\">\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Description\" ng-model=\"self.status.description\">\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"number\" class=\"form-control\" placeholder=\"0\" ng-model=\"self.status.level\">\\n  </div>\\n  <div class=\"form-group\">\\n  \t<button type=\"submit\" class=\"btn btn-primary\" ng-click=\"self.create(self.status)\">Add</button>\\n  </div>\\n</form>\\n\\n')}]);\n//# sourceMappingURL=doogie.min.js.map"],"sourceRoot":"/source/"}