{"version":3,"sources":["doogie.min.js"],"names":["angular","module","$","formatAMPM","date","hours","getHours","minutes","getMinutes","ampm","defaults","days","host","legend","fn","doogieboard","options","isTimeago","jQuery","timeago","extend","isNaN","eventPromise","get","__populate","__sort","servicePromise","statusPromise","this","each","index","elem","$elem","addClass","$table","$thead","$tbody","append","i","l","text","when","done","events","services","statuses","hash","length","Date","service","_id","$tr","name","j","k","$td","data","getMonth","getDate","setDate","_lastStatus","level","event","createdAt","_service","_status","eventCount","find","html","toISOString","message","$legend","status","description","wrap","prepend","$activeDay","$activeInfo","on","removeClass","remove","undefined","parent","getFullYear","after","factory","define","amd","refresh","contains","document","documentElement","prepareData","$s","$t","settings","datetime","cutoff","Math","abs","distance","inWords","element","trim","localeTitle","attr","toLocaleString","isTime","getTime","timestamp","parse","refreshMillis","allowPast","allowFuture","strings","prefixAgo","prefixFromNow","suffixAgo","suffixFromNow","inPast","seconds","minute","hour","day","month","months","year","years","wordSeparator","numbers","distanceMillis","substitute","stringOrFunction","number","string","isFunction","value","$l","replace","prefix","suffix","words","round","separator","join","iso8601","s","tagName","toLowerCase","functions","init","refresh_el","proxy","_timeagoInterval","setInterval","update","time","parsedTime","apply","updateFromDOM","dispose","window","clearInterval","action","Error","call","createElement","directive","link","scope","checksController","Service","Check","self","checks","query","check","method","successCode","successResponseTime","errorResponseTime","create","$save","then","$delete","templateUrl","controller","controllerAs","eventsController","Event","Status","servicesController","statusesController","Resource","$resource","url","paramDefaults","actions","resource","prototype","callback","$update","$create","run","$templateCache","put"],"mappings":"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","file":"doogie.min.js","sourcesContent":["angular.module(\"doogie\",[\"doogie.templates\",\"ngResource\"]),function(e){\"use strict\";function t(e){var t=e.getHours(),n=e.getMinutes(),s=t>=12?\"pm\":\"am\";return t%=12,t=t?t:12,n=10>n?\"0\"+n:n,t+\":\"+n+s}var n={days:5,host:\"http://localhost:3001/api/\",legend:!0};e.fn.doogieboard=function(s){var o=!!jQuery.timeago;s=s||{},s=e.extend({},n,s),(isNaN(s.days)||s.days<1)&&(s.days=n.days);var a=e.get(s.host+\"events\",{__populate:\"_status _service\",__sort:\"-createdAt\"}),r=e.get(s.host+\"services\",{__populate:\"_lastStatus\",__sort:\"name\"}),i=e.get(s.host+\"statuses\",{__sort:\"level\"});this.each(function(n,l){var c=s.days,d=e(l).addClass(\"doogieboard\"),u=e('<table class=\"table\"></table>'),m=e(\"<thead><tr></tr></thead>\"),f=e(\"<tbody></tbody>\");m.append(\"<th>Service</th>\");for(var p=0,v=c;v>p;p+=1){var g;g=0===p?\"Today\":1===p?\"Yesterday\":p+\" days ago\",m.append(\"<th>\"+g+\"</th>\")}e.when(a,r,i).done(function(n,a,r){var i={};a=a[0];for(var l=0,p=a.length;p>l;l+=1){var v=new Date,g=a[l];i[g._id]={};var h=e(\"<tr></tr>\");h.append('<td class=\"service-name\">'+g.name+\"</td>\");for(var b=0,y=c;y>b;b+=1){var _=e('<td class=\"doogieboard-day daysago-'+b+'\"><span class=\"doogieboard-badge\"><b class=\"event-count\"></b></span></td>');_.data(\"eventCount\",0),_.data(\"date\",v),i[g._id][v.getMonth()+\"-\"+v.getDate()]=_,h.append(_),v.setDate(v.getDate()-1),0===b&&g._lastStatus&&_.addClass(\"level-\"+g._lastStatus.level)}f.append(h)}n=n[0];for(var k,l=0,p=n.length;p>l;l+=1){k=n[l];var w=new Date(k.createdAt),_=i[k._service._id][w.getMonth()+\"-\"+w.getDate()];_.data(\"hasEvents\")||(_.data(\"hasEvents\",!0),_.addClass(\"doogieboard-events\"),_.addClass(\"level-\"+k._status.level));var T=_.data(\"eventCount\")+1;_.data(\"eventCount\",T),_.find(\".event-count\").html(T),_.append('<div class=\"event\"><b class=\"status\">'+k._status.name+\"</b> at \"+t(w)+', <time class=\"timeago\" datetime=\"'+w.toISOString()+'\">'+w.getMonth()+\"/\"+w.getDate()+\" \"+w.getHours()+\":\"+w.getMinutes()+\"</time>.<p>\"+k.message+\"</p></div>\")}if(u.append(m),u.append(f),d.append(u),s.legend){r=r[0];for(var x=e('<ul class=\"status-list\"></ul>'),l=0,p=r.length;p>l;l+=1){var S=r[l];x.append('<li class=\"status-item level-'+S.level+'\"><b>'+S.name+\"</b> <i>\"+S.description+\"</li>\")}x.wrap('<div class=\"legend\"></div>'),x.prepend(\"<h2>Status Legend</h2>\"),d.append(x)}o&&d.find(\".timeago\").timeago();var E,D;d.on(\"click\",\"td.doogieboard-events\",function(){var t=e(this);if(E&&(E.removeClass(\"events-open active\"),D.remove(),E[0]===t[0]))return void(E=D=void 0);t.addClass(\"events-open active\"),E=t;var n=t.parent(),s=t.data(\"date\");s=s.getMonth()+1+\"/\"+s.getDate()+\"/\"+s.getFullYear(),D=e('<tr class=\"doogieboard-info active\"><td><span class=\"date\">'+s+'</span></td><td colspan=\"'+c+'\">'+t.html()+\"</td></tr>\"),n.after(D)})})})}}(jQuery),function(e){\"function\"==typeof define&&define.amd?define([\"jquery\"],e):e(jQuery)}(function(e){function t(){if(!e.contains(document.documentElement,this))return e(this).timeago(\"dispose\"),this;var t=n(this),r=a.settings;return isNaN(t.datetime)||(0==r.cutoff||Math.abs(o(t.datetime))<r.cutoff)&&e(this).text(s(t.datetime)),this}function n(t){if(t=e(t),!t.data(\"timeago\")){t.data(\"timeago\",{datetime:a.datetime(t)});var n=e.trim(t.text());a.settings.localeTitle?t.attr(\"title\",t.data(\"timeago\").datetime.toLocaleString()):!(n.length>0)||a.isTime(t)&&t.attr(\"title\")||t.attr(\"title\",n)}return t.data(\"timeago\")}function s(e){return a.inWords(o(e))}function o(e){return(new Date).getTime()-e.getTime()}e.timeago=function(t){return s(t instanceof Date?t:\"string\"==typeof t?e.timeago.parse(t):\"number\"==typeof t?new Date(t):e.timeago.datetime(t))};var a=e.timeago;e.extend(e.timeago,{settings:{refreshMillis:6e4,allowPast:!0,allowFuture:!1,localeTitle:!1,cutoff:0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:\"ago\",suffixFromNow:\"from now\",inPast:\"any moment now\",seconds:\"less than a minute\",minute:\"about a minute\",minutes:\"%d minutes\",hour:\"about an hour\",hours:\"about %d hours\",day:\"a day\",days:\"%d days\",month:\"about a month\",months:\"%d months\",year:\"about a year\",years:\"%d years\",wordSeparator:\" \",numbers:[]}},inWords:function(t){function n(n,o){var a=e.isFunction(n)?n(o,t):n,r=s.numbers&&s.numbers[o]||o;return a.replace(/%d/i,r)}if(!this.settings.allowPast&&!this.settings.allowFuture)throw\"timeago allowPast and allowFuture settings can not both be set to false.\";var s=this.settings.strings,o=s.prefixAgo,a=s.suffixAgo;if(this.settings.allowFuture&&0>t&&(o=s.prefixFromNow,a=s.suffixFromNow),!this.settings.allowPast&&t>=0)return this.settings.strings.inPast;var r=Math.abs(t)/1e3,i=r/60,l=i/60,c=l/24,d=c/365,u=45>r&&n(s.seconds,Math.round(r))||90>r&&n(s.minute,1)||45>i&&n(s.minutes,Math.round(i))||90>i&&n(s.hour,1)||24>l&&n(s.hours,Math.round(l))||42>l&&n(s.day,1)||30>c&&n(s.days,Math.round(c))||45>c&&n(s.month,1)||365>c&&n(s.months,Math.round(c/30))||1.5>d&&n(s.year,1)||n(s.years,Math.round(d)),m=s.wordSeparator||\"\";return void 0===s.wordSeparator&&(m=\" \"),e.trim([o,u,a].join(m))},parse:function(t){var n=e.trim(t);return n=n.replace(/\\.\\d+/,\"\"),n=n.replace(/-/,\"/\").replace(/-/,\"/\"),n=n.replace(/T/,\" \").replace(/Z/,\" UTC\"),n=n.replace(/([\\+\\-]\\d\\d)\\:?(\\d\\d)/,\" $1$2\"),n=n.replace(/([\\+\\-]\\d\\d)$/,\" $100\"),new Date(n)},datetime:function(t){var n=e(t).attr(a.isTime(t)?\"datetime\":\"title\");return a.parse(n)},isTime:function(t){return\"time\"===e(t).get(0).tagName.toLowerCase()}});var r={init:function(){var n=e.proxy(t,this);n();var s=a.settings;s.refreshMillis>0&&(this._timeagoInterval=setInterval(n,s.refreshMillis))},update:function(n){var s=a.parse(n);e(this).data(\"timeago\",{datetime:s}),a.settings.localeTitle&&e(this).attr(\"title\",s.toLocaleString()),t.apply(this)},updateFromDOM:function(){e(this).data(\"timeago\",{datetime:a.parse(e(this).attr(a.isTime(this)?\"datetime\":\"title\"))}),t.apply(this)},dispose:function(){this._timeagoInterval&&(window.clearInterval(this._timeagoInterval),this._timeagoInterval=null)}};e.fn.timeago=function(e,t){var n=e?r[e]:r.init;if(!n)throw new Error(\"Unknown function name '\"+e+\"' for timeago\");return this.each(function(){n.call(this,t)}),this},document.createElement(\"abbr\"),document.createElement(\"time\")}),angular.module(\"doogie\").directive(\"doogieBoard\",[\"$timeout\",function(){function e(e,t){t.doogieboard()}var t={link:e};return t}]),angular.module(\"doogie\").directive(\"doogieChecks\",function(){function e(e,t){function n(){s.checks=t.query()}var s=this;n(),s.services=e.query({__sort:\"name\"}),s.check={method:\"GET\",successCode:\"^2[0-9][0-9]$\",successResponseTime:1e3,errorResponseTime:6e3},s.create=function(e){new t(e).$save().then(function(){n(),s.check={}})},s.update=function(e){e.$save().then(n)},s[\"delete\"]=function(e){e.$delete().then(function(){n()})}}var t={scope:{},templateUrl:\"templates/doogieChecks.html\",controller:e,controllerAs:\"self\"};return t}),angular.module(\"doogie\").directive(\"doogieEvents\",function(){function e(e,t,n){function s(){o.events=e.query()}var o=this;s(),o.services=n.query({__sort:\"name\"}),o.statuses=t.query({__sort:\"level\"}),o.event={},o.create=function(t){new e(t).$save().then(function(){s(),o.event={}})},o.update=function(e){e.$save().then(s)},o[\"delete\"]=function(e){e.$delete().then(function(){s()})}}var t={scope:{},templateUrl:\"templates/doogieEvents.html\",controller:e,controllerAs:\"self\"};return t}),angular.module(\"doogie\").directive(\"doogieServices\",function(){function e(e){function t(){n.services=e.query()}var n=this;t(),n.service={},n.create=function(s){new e(s).$save().then(function(){t(),n.service={}})},n.update=function(e){e.$save().then(t)},n[\"delete\"]=function(e){e.$delete().then(function(){t()})}}var t={scope:{},templateUrl:\"templates/doogieServices.html\",controller:e,controllerAs:\"self\"};return t}),angular.module(\"doogie\").directive(\"doogieStatuses\",function(){function e(e){function t(){n.statuses=e.query()}var n=this;t(),n.status={},n.create=function(s){new e(s).$save().then(function(){t(),n.status={}})},n.update=function(e){e.$save().then(t)},n[\"delete\"]=function(e){e.$delete().then(function(){t()})}}var t={scope:{},templateUrl:\"templates/doogieStatuses.html\",controller:e,controllerAs:\"self\"};return t}),angular.module(\"doogie\").factory(\"Check\",[\"Resource\",function(e){return e(\"checks/:_id\",{_id:\"@_id\"})}]),angular.module(\"doogie\").factory(\"Event\",[\"Resource\",function(e){return e(\"events/:_id\",{_id:\"@_id\"})}]),angular.module(\"doogie\").factory(\"Resource\",[\"$resource\",function(e){return function(t,n,s){t=\"/api/\"+t;var o={update:{method:\"put\"},create:{method:\"post\"}};s=angular.extend(o,s);var a=e(t,n,s);return a.prototype.$save=function(e){return this._id?this.$update(e):this.$create(e)},a}}]),angular.module(\"doogie\").factory(\"Service\",[\"Resource\",function(e){return e(\"services/:_id\",{_id:\"@_id\"})}]),angular.module(\"doogie\").factory(\"Status\",[\"Resource\",function(e){return e(\"statuses/:_id\",{_id:\"@_id\"})}]),angular.module(\"doogie.templates\",[]).run([\"$templateCache\",function(e){e.put(\"templates/doogieChecks.html\",'<h2>Checks</h2>\\n<form class=\"form-inline\" ng-repeat=\"check in self.checks | orderBy: \\'url\\'\">\\n  <div class=\"form-group\">\\n    <select class=\"form-control\" ng-model=\"check._service\" ng-options=\"service._id as service.name for service in self.services\"></select>\\n  </div>\\n\t<div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Name\" ng-model=\"check.name\">\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"http://www.yourcheck.com\" ng-model=\"check.url\">\\n  </div>\\n  <div class=\"form-group\">\\n    <select class=\"form-control\" ng-model=\"check.method\">\\n      <option value=\"GET\">GET</option>\\n      <option value=\"POST\">POST</option>\\n      <option value=\"PUT\">PUT</option>\\n      <option value=\"DELETE\">DELETE</option>\\n    </select>\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" ng-model=\"check.successCode\">\\n    <input type=\"text\" class=\"form-control\" ng-model=\"check.successResponseTime\">\\n    <input type=\"text\" class=\"form-control\" ng-model=\"check.errorResponseTime\">\\n  </div>\\n  <div class=\"form-group\">\\n\t  <button class=\"btn btn-default\" ng-click=\"self.update(check)\">Save</button>\\n\t  <button class=\"btn btn-danger\" ng-click=\"self.delete(check)\">Delete</button>\\n  </div>\\n</form>\\n<form class=\"form-inline\">\\n  <div class=\"form-group\">\\n    <select class=\"form-control\" ng-model=\"self.check._service\" ng-options=\"service._id as service.name for service in self.services\"></select>\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Name\" ng-model=\"self.check.name\">\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"http://www.yourcheck.com\" ng-model=\"self.check.url\">\\n  </div>\\n  <div class=\"form-group\">\\n    <select class=\"form-control\" ng-model=\"self.check.method\">\\n      <option value=\"GET\">GET</option>\\n      <option value=\"POST\">POST</option>\\n      <option value=\"PUT\">PUT</option>\\n      <option value=\"DELETE\">DELETE</option>\\n    </select>\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" ng-model=\"self.check.successCode\">\\n    <input type=\"text\" class=\"form-control\" ng-model=\"self.check.successResponseTime\">\\n    <input type=\"text\" class=\"form-control\" ng-model=\"self.check.errorResponseTime\">\\n  </div>\\n  <div class=\"form-group\">\\n  \t<button class=\"btn btn-primary\" ng-click=\"self.create(self.check)\">Add</button>\\n  </div>\\n</form>\\n'),e.put(\"templates/doogieEvents.html\",'<h2>Events</h2>\\n<form class=\"form-inline\">\\n  <div class=\"form-group\">\\n    <select class=\"form-control\" ng-model=\"self.event._service\" ng-options=\"service._id as service.name for service in self.services\"></select>\\n  </div>\\n  <div class=\"form-group\">\\n    <select class=\"form-control\" ng-model=\"self.event._status\" ng-options=\"status._id as status.name for status in self.statuses\"></select>\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Message\" ng-model=\"self.event.message\">\\n  </div>\\n  <div class=\"form-group\">\\n  \t<button type=\"submit\" class=\"btn btn-primary\" ng-click=\"self.create(self.event)\">Send</button>\\n  </div>\\n</form>\\n<form class=\"form-inline\" ng-repeat=\"event in self.events | orderBy : \\'createdAt\\' : true \">\\n\t<div class=\"form-group\">\\n    <select class=\"form-control\" ng-model=\"event._service\" ng-options=\"service._id as service.name for service in self.services\"></select>\\n  </div>\\n  <div class=\"form-group\">\\n    <select class=\"form-control\" ng-model=\"event._status\" ng-options=\"status._id as status.name for status in self.statuses\"></select>\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Message\" ng-model=\"event.message\">\\n  </div>\\n  <div class=\"form-group\">\\n\t  <button type=\"submit\" class=\"btn btn-default\" ng-click=\"self.update(event)\">Save</button>\\n\t  <button type=\"submit\" class=\"btn btn-danger\" ng-click=\"self.delete(event)\">Delete</button>\\n  </div>\\n</form>\\n'),e.put(\"templates/doogieServices.html\",'<h2>Services</h2>\\n<form class=\"form-inline\" ng-repeat=\"service in self.services | orderBy: \\'name\\'\">\\n\t<div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Name\" ng-model=\"service.name\">\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Description\" ng-model=\"service.description\">\\n  </div>\\n  <div class=\"form-group\">\\n\t  <button type=\"submit\" class=\"btn btn-default\" ng-click=\"self.update(service)\">Save</button>\\n\t  <button type=\"submit\" class=\"btn btn-danger\" ng-click=\"self.delete(service)\">Delete</button>\\n  </div>\\n</form>\\n<form class=\"form-inline\">\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Name\" ng-model=\"self.service.name\">\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Description\" ng-model=\"self.service.description\">\\n  </div>\\n  <div class=\"form-group\">\\n  \t<button type=\"submit\" class=\"btn btn-primary\" ng-click=\"self.create(self.service)\">Add</button>\\n  </div>\\n</form>\\n'),e.put(\"templates/doogieStatuses.html\",'<h2>Statuses</h2>\\n<form class=\"form-inline\" ng-repeat=\"status in self.statuses | orderBy : \\'level\\'\">\\n\t<div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Name\" ng-model=\"status.name\">\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Description\" ng-model=\"status.description\">\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"number\" class=\"form-control\" placeholder=\"0\" ng-model=\"status.level\">\\n  </div>\\n  <div class=\"form-group\">\\n\t  <button type=\"submit\" class=\"btn btn-default\" ng-click=\"self.update(status)\">Save</button>\\n\t  <button type=\"submit\" class=\"btn btn-danger\" ng-click=\"self.delete(status)\">Delete</button>\\n  </div>\\n</form>\\n<form class=\"form-inline\">\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Name\" ng-model=\"self.status.name\">\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"text\" class=\"form-control\" placeholder=\"Description\" ng-model=\"self.status.description\">\\n  </div>\\n  <div class=\"form-group\">\\n    <input type=\"number\" class=\"form-control\" placeholder=\"0\" ng-model=\"self.status.level\">\\n  </div>\\n  <div class=\"form-group\">\\n  \t<button type=\"submit\" class=\"btn btn-primary\" ng-click=\"self.create(self.status)\">Add</button>\\n  </div>\\n</form>\\n\\n')}]);\n//# sourceMappingURL=doogie.min.js.map"],"sourceRoot":"/source/"}