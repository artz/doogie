angular.module("doogie",["doogie.templates","ngSanitize","ngResource","ngRoute"]).config(["$routeProvider","$locationProvider",function(e){e.when("/",{templateUrl:"templates/dashboard.html"}).when("/admin",{templateUrl:"templates/admin.html"}).otherwise({redirectTo:"/"})}]),angular.module("doogie").controller("navController",["$location","Auth",function(e,n){this.user=n.user,this.isActive=function(n){return n===e.path()}}]),angular.module("doogie").directive("doogieBar",function(){var e={scope:{},templateUrl:"templates/doogieBar.html",controller:["Event","Status","Service",function(e,n,t){function s(){o.events=e.query()}var o=this;s(),o.services=t.query({__sort:"name"}),o.statuses=n.query({__sort:"level"}),o.event={},o.create=function(n){new e(n).$save().then(function(){s(),o.event={}})},o.update=function(e){e.$save().then(s)},o["delete"]=function(e){e.$delete().then(function(){s()})}}],controllerAs:"self"};return e}),angular.module("doogie").directive("doogieBoard",function(){function e(e,n,t){var s="false"!==t.legend;n.doogieboard({legend:s})}var n={link:e};return n}),angular.module("doogie").directive("doogieChecks",function(){function e(e){var n={};return e.split("\n").forEach(function(t){if(t=t.split(":"),e[0])var s=t[0].trim();if(s&&e[1]){var o=t[1].trim();n[s]=o}}),n}function n(e){var n="";for(var t in e)n+=t+":"+e[t]+"\n";return n}var t={scope:{},templateUrl:"templates/doogieChecks.html",controller:["Service","Check",function(t,s){function o(){s.query().$promise.then(function(e){r.checks=e.map(function(e){return e.headers=n(e.headers),e})})}var r=this;o(),r.services=t.query({__sort:"name"}),r.check={method:"GET",successCode:"^2[0-9][0-9]$",successResponseTime:1e3,errorResponseTime:6e3},r.create=function(n){n.headers=e(n.headers),new s(n).$save().then(function(){o(),r.check={}})},r.update=function(n){n.headers=e(n.headers),n.$save().then(o)},r["delete"]=function(e){e.$delete().then(function(){o()})}}],controllerAs:"self"};return t}),angular.module("doogie").directive("doogieEvents",function(){var e={scope:{},templateUrl:"templates/doogieEvents.html",controller:["Event","Status","Service",function(e,n,t){function s(){o.events=e.query()}var o=this;s(),o.services=t.query({__sort:"name"}),o.statuses=n.query({__sort:"level"}),o.event={},o.create=function(n){new e(n).$save().then(function(){s(),o.event={}})},o.update=function(e){e.$save().then(s)},o["delete"]=function(e){e.$delete().then(function(){s()})}}],controllerAs:"self"};return e}),angular.module("doogie").directive("doogieServices",function(){var e={scope:{},templateUrl:"templates/doogieServices.html",controller:["Service",function(e){function n(){t.services=e.query()}var t=this;n(),t.service={},t.create=function(s){new e(s).$save().then(function(){n(),t.service={}})},t.update=function(e){e.$save().then(n)},t["delete"]=function(e){e.$delete().then(function(){n()})}}],controllerAs:"self"};return e}),angular.module("doogie").directive("doogieStatuses",function(){var e={scope:{},templateUrl:"templates/doogieStatuses.html",controller:["Status",function(e){function n(){t.statuses=e.query()}var t=this;n(),t.status={},t.create=function(s){new e(s).$save().then(function(){n(),t.status={}})},t.update=function(e){e.$save().then(n)},t["delete"]=function(e){e.$delete().then(function(){n()})}}],controllerAs:"self"};return e}),angular.module("doogie").directive("doogieUsers",function(){var e={scope:{},templateUrl:"templates/doogieUsers.html",controller:["User","Auth",function(e,n){function t(){s.users=e.query()}{var s=this;n.user}t(),s.toggleAdmin=function(e){if(e.roles){var n=e.roles.indexOf("admin");-1===n?e.roles.push("admin"):e.roles.splice(n,1)}else e.roles=["admin"];e.$save().then(t)},s["delete"]=function(e){e.$delete().then(function(){t()})}}],controllerAs:"self"};return e}),angular.module("doogie.templates",[]).run(["$templateCache",function(e){e.put("templates/admin.html","<doogie-events></doogie-events>\n<doogie-checks></doogie-checks>\n<doogie-services></doogie-services>\n<doogie-statuses></doogie-statuses>\n<doogie-users></doogie-users>\n"),e.put("templates/dashboard.html",'<doogie-board legend="false"></doogie-board>\n'),e.put("templates/doogieBar.html",'<form class="navbar-form navbar-left">\n  <div class="form-group">\n    <select class="form-control" ng-model="self.event._service" ng-options="service._id as service.name for service in self.services"></select>\n  </div>\n  <div class="form-group">\n    <select class="form-control" ng-model="self.event._status" ng-options="status._id as status.name for status in self.statuses"></select>\n  </div>\n  <div class="form-group">\n    <input type="text" class="form-control" placeholder="Message" ng-model="self.event.message" size="60">\n  </div>\n  <div class="form-group">\n  	<button type="submit" class="btn btn-primary" ng-click="self.create(self.event)">Send</button>\n  </div>\n</form>\n'),e.put("templates/doogieChecks.html",'<h2>Checks</h2>\n\n<form class="form-inline">\n  <div class="form-group">\n    <select class="form-control" ng-model="self.check._service" ng-options="service._id as service.name for service in self.services"></select>\n  </div>\n  <div class="form-group">\n    <input type="text" class="form-control" placeholder="Name" ng-model="self.check.name">\n  </div>\n  <div class="form-group">\n    <input type="text" class="form-control" placeholder="http://www.yourcheck.com" ng-model="self.check.url">\n  </div>\n  <div class="form-group">\n    <select class="form-control" ng-model="self.check.method">\n      <option value="GET">GET</option>\n      <option value="POST">POST</option>\n      <option value="PUT">PUT</option>\n      <option value="DELETE">DELETE</option>\n    </select>\n  </div>\n  <div class="form-group">\n    <input type="text" class="form-control" ng-model="self.check.successCode" size="6">\n    <input type="text" class="form-control" ng-model="self.check.successResponseTime" size="4">\n    <input type="text" class="form-control" ng-model="self.check.errorResponseTime" size="4">\n  </div>\n  <div class="form-group">\n    <textarea type="text" ng-model="self.check.headers"></textarea>\n  </div>\n  <!--<div class="form-group">\n    <input type="text" class="form-control" ng-model="self.names[0]" size="10">\n    <input type="text" class="form-control" ng-model="self.check.headers[self.names[0]]" size="10">\n    <input type="text" class="form-control" ng-model="self.names[1]" size="10">\n    <input type="text" class="form-control" ng-model="self.check.headers[self.names[1]]" size="10">\n  </div>-->\n  <div class="form-group">\n    <button class="btn btn-primary" ng-click="self.create(self.check)">Add</button>\n  </div>\n</form>\n\n<form class="form-inline" ng-repeat="check in self.checks">\n  <div class="form-group">\n    <select class="form-control" ng-model="check._service" ng-options="service._id as service.name for service in self.services"></select>\n  </div>\n	<div class="form-group">\n    <input type="text" class="form-control" placeholder="Name" ng-model="check.name">\n  </div>\n  <div class="form-group">\n    <input type="text" class="form-control" placeholder="http://www.yourcheck.com" ng-model="check.url">\n  </div>\n  <div class="form-group">\n    <select class="form-control" ng-model="check.method">\n      <option value="GET">GET</option>\n      <option value="POST">POST</option>\n      <option value="PUT">PUT</option>\n      <option value="DELETE">DELETE</option>\n    </select>\n  </div>\n  <div class="form-group">\n    <input type="text" class="form-control" ng-model="check.successCode" size="6">\n    <input type="text" class="form-control" ng-model="check.successResponseTime" size="4">\n    <input type="text" class="form-control" ng-model="check.errorResponseTime" size="4">\n  </div>\n  <div class="form-group">\n    <textarea type="text" ng-model="check.headers"></textarea>\n  </div>\n  <div class="form-group">\n	  <button class="btn btn-default" ng-click="self.update(check)">Save</button>\n	  <button class="btn btn-danger" ng-click="self.delete(check)">Delete</button>\n  </div>\n</form>\n\n'),e.put("templates/doogieEvents.html",'<h2>Events</h2>\n\n<form class="form-inline">\n  <div class="form-group">\n    <select class="form-control" ng-model="self.event._service" ng-options="service._id as service.name for service in self.services"></select>\n  </div>\n  <div class="form-group">\n    <select class="form-control" ng-model="self.event._status" ng-options="status._id as status.name for status in self.statuses"></select>\n  </div>\n  <div class="form-group">\n    <input type="text" class="form-control" placeholder="Message" ng-model="self.event.message" size="60">\n  </div>\n  <div class="form-group">\n  	<button type="submit" class="btn btn-primary" ng-click="self.create(self.event)">Send</button>\n  </div>\n</form>\n<form class="form-inline" ng-repeat="event in self.events">\n	<div class="form-group">\n    <select class="form-control" ng-model="event._service" ng-options="service._id as service.name for service in self.services"></select>\n  </div>\n  <div class="form-group">\n    <select class="form-control" ng-model="event._status" ng-options="status._id as status.name for status in self.statuses"></select>\n  </div>\n  <div class="form-group">\n    <input type="text" class="form-control" placeholder="Message" ng-model="event.message" size="60">\n  </div>\n  <div class="form-group">\n	  <button type="submit" class="btn btn-default" ng-click="self.update(event)">Save</button>\n	  <button type="submit" class="btn btn-danger" ng-click="self.delete(event)">Delete</button>\n  </div>\n</form>\n'),e.put("templates/doogieServices.html",'<h2>Services</h2>\n\n<form class="form-inline">\n  <div class="form-group">\n    <input type="text" class="form-control" placeholder="Name" ng-model="self.service.name">\n  </div>\n  <div class="form-group">\n    <input type="text" class="form-control" placeholder="Description" ng-model="self.service.description" size="60">\n  </div>\n  <div class="form-group">\n    <button class="btn btn-primary" ng-click="self.create(self.service)">Add</button>\n  </div>\n</form>\n\n<form class="form-inline" ng-repeat="service in self.services">\n	<div class="form-group">\n    <input type="text" class="form-control" placeholder="Name" ng-model="service.name">\n  </div>\n  <div class="form-group">\n    <input type="text" class="form-control" placeholder="Description" ng-model="service.description" size="60">\n  </div>\n  <div class="form-group">\n	  <button class="btn btn-default" ng-click="self.update(service)">Save</button>\n	  <button class="btn btn-danger" ng-click="self.delete(service)">Delete</button>\n  </div>\n</form>\n'),e.put("templates/doogieStatuses.html",'<h2>Statuses</h2>\n\n<form class="form-inline">\n  <div class="form-group">\n    <input type="text" class="form-control" placeholder="Name" ng-model="self.status.name">\n  </div>\n  <div class="form-group">\n    <input type="text" class="form-control" placeholder="Description" ng-model="self.status.description" size="52">\n  </div>\n  <div class="form-group">\n    <input type="text" class="form-control" placeholder="0" ng-model="self.status.level" size="2">\n  </div>\n  <div class="form-group">\n    <button class="btn btn-primary" ng-click="self.create(self.status)">Add</button>\n  </div>\n</form>\n\n<form class="form-inline" ng-repeat="status in self.statuses">\n	<div class="form-group">\n    <input type="text" class="form-control" placeholder="Name" ng-model="status.name">\n  </div>\n  <div class="form-group">\n    <input type="text" class="form-control" placeholder="Description" ng-model="status.description" size="52">\n  </div>\n  <div class="form-group">\n    <input type="text" class="form-control" placeholder="0" ng-model="status.level" size="2">\n  </div>\n  <div class="form-group">\n	  <button class="btn btn-default" ng-click="self.update(status)">Save</button>\n	  <button class="btn btn-danger" ng-click="self.delete(status)">Delete</button>\n  </div>\n</form>\n'),e.put("templates/doogieUsers.html",'<h2>Users</h2>\n\n<form class="form-inline" ng-repeat="user in self.users">\n	<div class="form-group">\n    <b>{{ user.displayName }}</b> (@{{ user.username }})\n  </div>\n  <div class="checkbox">\n    <label><input type="checkbox" ng-checked="user.roles.indexOf(\'admin\') !== -1" ng-click="self.toggleAdmin(user)"> Admin</label>\n  </div>\n  <!--<div class="form-group">\n	  <button class="btn btn-danger" ng-click="self.delete(user)">Delete</button>\n  </div>-->\n</form>\n')}]),angular.module("doogie").factory("Auth",["$http",function(e){function n(){return t=e.get("/auth/user").success(function(e){angular.extend(t,e)})["finally"](function(){t.$resolved=!0}),t.$resolved=!1,t}var t;n();var s={user:t};return s}]),angular.module("doogie").factory("Check",["Resource",function(e){return e("checks/:_id",{_id:"@_id"})}]),angular.module("doogie").factory("Event",["Resource",function(e){return e("events/:_id",{_id:"@_id"})}]),angular.module("doogie").factory("Resource",["$resource",function(e){return function(n,t,s){n="/api/"+n;var o={update:{method:"put"},create:{method:"post"}};s=angular.extend(o,s);var r=e(n,t,s);return r.prototype.$save=function(e){return this._id?this.$update(e):this.$create(e)},r}}]),angular.module("doogie").factory("Service",["Resource",function(e){return e("services/:_id",{_id:"@_id"})}]),angular.module("doogie").factory("Status",["Resource",function(e){return e("statuses/:_id",{_id:"@_id"})}]),angular.module("doogie").factory("User",["Resource",function(e){return e("users/:_id",{_id:"@_id"})}]);
//# sourceMappingURL=doogie.min.js.map